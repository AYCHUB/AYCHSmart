{% extends "core/pydici.html" %}

{% load i18n %}

{% block title %}{% trans "Contact detail" %} {{ contact }}{% endblock %}

{% block extrajs %}<script type="text/javascript" src="http://cytoscape.github.io/cytoscape.js/api/cytoscape.js-latest/cytoscape.min.js"></script>{% endblock %}

{% block content %}

<div class="row">
    <div class="col-md-6">
        <table class="table table-hover table-striped">
        <tr><th><span class="glyphicon glyphicon-user"></span> {% trans "name" %}</th><td>{{ contact.name }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-earphone"></span> {% trans "phone" %}</th><td>{{ contact.phone }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-phone"></span> {% trans "mobile phone" %}</th><td>{{ contact.mobile_phone }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-print"></span> {% trans "fax" %}</th><td>{{ contact.fax }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-envelope"></span> {% trans "email" %}</th><td>{{ contact.email|urlize }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-briefcase"></span> {% trans "function" %}</th><td>{{ contact.function }}</td></tr>
        <tr><th><span class="glyphicon glyphicon-home"></span> {% trans "companies" %}</th><td>{{ contact.companies }}</td></tr>
        </table>
    </div>
    <div class="col-md-6">
        <!-- placeholder for photo -->
    </div>
</div>


    <a role="button" class="btn btn-default" href="{% url 'contact_update' contact.id %}">{% trans "edit" %}</a>
    <a role="button" class="btn btn-danger" style="color:#FFFFFF" href="{% url 'contact_delete' contact.id %}">{% trans "delete" %}</a>


<div id="cy" style="height: 100%;width: 100%;position: absolute;"></div>





<script type="text/javascript">
<!--
$(document).ready(function() {
    console.log("go");

    $('#cy').cytoscape({
      style: cytoscape.stylesheet()
        .selector('node')
          .css({
            'content': 'data(name)',
            'text-valign': 'center',
            'color': 'grey',
            'background-color': '#EEE',
          })
        .selector('edge')
          .css({
            'target-arrow-shape': 'triangle'
          })
        .selector(':selected')
          .css({
            'background-color': 'black',
            'line-color': 'black',
            'target-arrow-color': 'black',
            'source-arrow-color': 'black'
          })
        .selector('.faded')
          .css({
            'opacity': 0.25,
            'text-opacity': 0
          }),

      elements: {{ contact.relationData|safe }},

      layout: {
        name: 'breadthfirst',
        directed: true,
        padding: 0,
        fit: true,
      },
      
      ready: function(){
        window.cy = this;
        
        cy.elements().unselectify();
        
        cy.on('tap', 'node', function(e){
          var node = e.cyTarget; 
          var neighborhood = node.neighborhood().add(node);
          
          cy.elements().addClass('faded');
          neighborhood.removeClass('faded');
        });
        
        cy.on('tap', function(e){
          if( e.cyTarget === cy ){
            cy.elements().removeClass('faded');
          }
        });
      }
    });

});
-->
</script>


{% endblock %}