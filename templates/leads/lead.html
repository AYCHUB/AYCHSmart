{% extends "core/pydici.html" %}

{% load i18n %}
{% load crispy_forms_tags %}

{% block title %}{% trans "Add or modify a Lead" %}{% endblock %}

{% block content %}

{% crispy form form.helper %}

<!-- Modal window to display client creation -->
<div class="modal fade" id="clientModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
        <h4 class="modal-title" id="clientModalLabel">{% trans "Add client" %}</h4>
      </div>
      <div class="modal-body expense-receipt">
        ...
      </div>
    </div>
  </div>
</div>


<script type="text/JavaScript">
$(document).ready(function(){
    // Fill modal with content from link href
    $("#clientModal").on("show.bs.modal", function(e) {
        var link = $(e.relatedTarget);
        var desc = link.closest("tr").find(".description").html() + " - " + link.closest("tr").find(".amount").html();
        $(this).find("#expenseModalLabel").html(desc);
        var url = '{% url 'crm.views.client' %}?popup';
        $(this).find(".modal-body").load(link.attr("href"));
    });
});

</script>

{% include "core/_datepicker.html" %}

{% endblock %}