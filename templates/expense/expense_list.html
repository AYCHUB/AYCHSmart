{# Page fragment that display mission expenses #}
{# Intented to be loaded by an ajax load in a tab #}
{# Or to be included in other page (like expense history #}
{# List of expenses must be called {{ expenses }} #}

{% load i18n %}
{% load pydici_filters %}

{% if expenses %}
<div class="imodule">
<table>
<tr>
    <th>{% trans "People" %}</th>
    <th>{% trans "Description" %}</th>
    <th>{% trans "Lead" %}</th>
    <th>{% trans "Amount" %}</th>
    <th>{% trans "Chargeable" %}</th>
    <th>{% trans "Receipt" %}</th>
    <th>{% trans "State" %}</th>
    <th>{% trans "Expense date" %}</th>
    <th>{% trans "Update date" %}</th>
    <th>{% trans "Comments" %}</th>
</tr>
{% for expense in expenses %}
    <tr {%cycle 'class="row1"' 'class="row2"' %}>
    <td>{{ expense.user.username|link_to_consultant }}</td>
    <td>{{ expense.description }}</td>
    <td>{% if expense.lead %}<a href="{% url pydici.leads.views.detail expense.lead.id %}">{{ expense.lead }}</a>{% endif %}</td>
    <td>{{ expense.amount }}</td>
    <td>{% if expense.chargeable %}{% trans "Yes" %}{% else %}{% trans "No" %}{% endif %}</td>
    <td>{% if expense.receipt %}<a href='{% url pydici.expense.views.expense_receipt expense.id %}'><img src='{{ MEDIA_URL }}pydici/receipt.png'/></a>{% endif %}</td>
    <td>{{ expense.state }}</td>
    <td>{{ expense.expense_date }}</td>
    <td>{{ expense.update_date }}</td>
    <td>{{ expense.comment }}</td>
    </tr>
{% endfor %}
</table>
</div>

{% else %}
    {% trans "No expense" %}
{% endif %}